{
  "version": 1,
  "formatters": [
    {
      "name": "pickLang",
      "type": "pure",
      "argsSchema": { "lang": "string", "fallback": "string" },
      "description": "Extrait une valeur multilingue selon lang, sinon fallback."
    },
    {
      "name": "toString",
      "type": "pure",
      "argsSchema": {},
      "description": "Convertit en string (ou '' si null)."
    },
    {
      "name": "toInt",
      "type": "pure",
      "argsSchema": {},
      "description": "Convertit en int (ou 0 si invalide)."
    },
    {
      "name": "nullableInt",
      "type": "pure",
      "argsSchema": {},
      "description": "Convertit en int ou null."
    },
    {
      "name": "clampInt",
      "type": "pure",
      "argsSchema": { "min": "number", "max": "number" },
      "description": "Borne un entier entre min et max."
    },
    {
      "name": "truncate",
      "type": "pure",
      "argsSchema": { "max": "number" },
      "description": "Tronque une string à max caractères."
    },
    {
      "name": "mapSizeToKrosmoz",
      "type": "pure",
      "argsSchema": { "default": "string" },
      "description": "Mappe une taille (tiny/small/medium/large/huge) vers le format attendu KrosmozJDR."
    },
    {
      "name": "mapDofusdbItemType",
      "type": "pure",
      "argsSchema": {},
      "description": "Mappe un typeId DofusDB vers un type KrosmozJDR (en tenant compte de resource_types.allowed)."
    },
    {
      "name": "mapDofusdbItemCategory",
      "type": "pure",
      "argsSchema": {},
      "description": "Mappe un typeId DofusDB vers une catégorie KrosmozJDR (en tenant compte de resource_types.allowed)."
    },
    {
      "name": "storeScrappedImage",
      "type": "side_effect",
      "argsSchema": { "entityFolder": "string", "idPath": "string" },
      "description": "Télécharge/stocke une image distante selon la config scrapping.images."
    },
    {
      "name": "normalizeDofusdbEffects",
      "type": "pure",
      "argsSchema": { "sourceType": "string", "includeRaw": "boolean" },
      "description": "Normalise une liste d'effets DofusDB (sorts/items) dans un format stable (EffectInstance)."
    },
    {
      "name": "jsonEncode",
      "type": "pure",
      "argsSchema": { "pretty": "boolean" },
      "description": "Encode une valeur en JSON (utile pour stocker un array dans une colonne string)."
    },
    {
      "name": "mapDofusdbEffectsToKrosmozBonuses",
      "type": "pure",
      "argsSchema": { "lang": "string" },
      "description": "Mappe des instances d'effets DofusDB (items/spell-levels) vers un payload bonus KrosmozJDR (stats, résistances, dommages)."
    },
    {
      "name": "packDofusdbEffects",
      "type": "pure",
      "argsSchema": { "sourceType": "string", "includeRaw": "boolean", "lang": "string" },
      "description": "Pack couche A (effects normalisés) + couche B (bonus Krosmoz) dans un objet unique."
    }
  ]
}

