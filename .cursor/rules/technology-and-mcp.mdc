---
name: technology-and-mcp
description: >
  IntÃ¨gre la **stack Krosmozâ€‘JDR** (Laravelâ€¯12, PHPâ€¯8.4, Vueâ€¯3, Tailwind CSS, DaisyUI, Tiptap, esbuild/rollup)
  et les normes CI/CD/tests. Guide lâ€™usage des MCP tools :
    - `playwright` pour interagir automatiquement avec lâ€™UI (clics, formulaires, capture Ã©cran, logs).
    - `browser-tools` pour debug live via ton navigateur Vivaldi (logs, rÃ©seau, audits SEO/performance).
    - `laravel-db` (ou Ã©quivalent) pour introspection sans modification de la base de donnÃ©es.
globs:
  - "**/*.php"
  - "**/*.js"
  - "**/*.vue"
alwaysApply: true
---

## ğŸ“¦ Stack & Technologies Krosmozâ€‘JDR

- **Backend** : Laravelâ€¯12 (PHPâ€¯8.4), MySQL (`krosmozDB`), secrets gÃ©rÃ©s via `.env` (ne **jamais** versionner ce fichier).
- **Frontend** : Vueâ€¯3, SCSS, Tailwind CSS + DaisyUI, Tiptap comme Ã©diteur WYSIWYG, outil de build esbuild/rollup, multi-langues via vue-i18n.
- **Tests** : PHPUnit (backend), Vitest ou Jest (frontend), Cypress en end-to-end.
- **CI/CD** : pipelines GitHub ou GitLab CI automatisant le lint, les tests, le build et le dÃ©ploiement.
- Docs projet Ã  jour dans `/docs/` (notamment `TECHNOLOGIES.md`, `PROJECT_STRUCTURE.md`).

## ğŸ§ª Quand utiliser chaque MCP Tool

### âœ… `playwright`
- Utiliser pour tout **scÃ©nario automatisÃ©** : navigation, clics, remplissage de formulaires, upload, capture Ã©cran, lecture de logs JS et requÃªtes rÃ©seau.
- Le **snapshot DOM** (accessibilitÃ©) permet une interaction fiable sans vision. Aucun modÃ¨le visuel extÃ©rieur requis.
- Exemples :
  > â€œUse `playwright` to `http://localhost:5173/register`, fill name/email/password, submit form, screenshot page, then show console and network logs.â€

### ğŸ› ï¸ `browser-tools`
- Outil de **debug interactif Ã  chaud**, sâ€™exÃ©cute sur ton onglet Vivaldi ouvert via extension Chrome + serveur local.
- Fournit logs JS, trafic rÃ©seau, contrÃ´les DOM, audits SEO/performance/accessibilitÃ©.
- IdÃ©al dans la phase de dÃ©veloppement interactivement, sans ouvrir une nouvelle session browser via MCP.
- Exemples :
  > â€œUse `browser-tools` to capture console errors when I click Submit in my dev tab.â€  
  > â€œRun a performance audit or SEO check on this page.â€

### ğŸ§© `laravel-db`
- Sert Ã  **inspecter la base de donnÃ©es** via une interface Maestro local (`artisan mcp:serve` ou MySQL MCP dÃ©diÃ©).
- Toujours en **mode lecture seule**, interroger les schÃ©mas, donnÃ©es de test, clÃ©s Ã©trangÃ¨res (SELECT uniquement).
- Exemples :
  > â€œUse `laravel-db` to describe the `users` table structure.â€  
  > â€œSelect the latest 5 rows in `spellbooks` table.â€

---

## ğŸ”„ Workflow recommandÃ© de lâ€™IA

1. Avant toute **modification front-end**, lâ€™IA **passe par `playwright`** pour reproduire le workflow sur ton site local, capturer logs et screenshots.
2. Pour du **debug interactif**, lâ€™IA rÃ©pond aux prompts via `browser-tools` directement dans ton navigateur actuel, sans nouvel onglet.
3. Les **modifications backend** passent par `laravel-db`: pour lecture du schÃ©ma ou consultation de donnÃ©es, lâ€™IA doit demander lâ€™activation si le tool est disponible dans `.cursor/mcp.json`.
4. Si un tool demandÃ© est **inactif ou non dÃ©tectÃ©**, lâ€™IA doit inviter Ã  le (rÃ©)activer via `.cursor/mcp.json`.

---

## ğŸ“ RÃ©fÃ©rences documentation

- `/docs/docs.index.json`, `/docs/00-Project/TECHNOLOGIES.md`, `/docs/10-BestPractices/PROJECT_STRUCTURE.md`
- Guide **Model Context Protocol** sur site officiel Cursor (rÃ©glages MCP, testing tools, modes intÃ©grÃ©s)

---

## ğŸ’¬ Conseils de rÃ©daction des prompts

- Toujours mentionner explicitement le **tool** : `playwright`, `browser-tools` ou `laravel-db`.
- DÃ©crire les actions souhaitÃ©es dâ€™une maniÃ¨re **trÃ¨s directive et sÃ©quencÃ©e**.
- Exemples :
  > â€œUse `playwright` to open `/login`, type email, type password, click Login, then show me console and screenshot.â€  
  > â€œUse `browser-tools` to capture all JS errors when I click Add Spell on the current tab.â€

---

## âš ï¸ Points de vigilance

- **Pas besoin de clÃ© API externe** : Playwright MCP fonctionne en local via Node.js, licence Apacheâ€‘2.0, sans coÃ»t supplÃ©mentaire. Aucun traitement tiers ni besoin dâ€™Anthropic API :contentReference[oaicite:1]{index=1}.
- **CompatibilitÃ©** :
  - macOS ou Linux (ou WSL2 sous Windows) recommandÃ© pour fiabilitÃ©, en particulier sur les versions rÃ©cents Cursor et Node.js 18+.
  - Sur versions Cursor 1.0+, Playwright MCP rencontre parfois des instabilitÃ©s ou des problÃ¨mes dâ€™ouverture du navigateur â€” assure-toi de garder tes outils Ã  jour et surveiller les logs MCP :contentReference[oaicite:2]{index=2}.
- **Workflows complexes** (sÃ©quences >â€¯25 appels MCP) peuvent saturer le contexte LLM : segmenter les prompts ou utiliser le mode auto-run avec prudence.

---

### âœ… Pourquoi cette rule est pertinente

- **AlwaysApply = true** : ton IA a en permanence un contexte clair sur ta stack et les outils disponibles.
- **Instruction explicite** sur quel tool utiliser selon la tÃ¢che (UI vs logs vs base).
- Compatible avec un environnement **entiÃ¨rement local**, **gratuit**, **sans clÃ©s API externes** â€” donc sÃ»r et maÃ®trisÃ©.
- **SÃ©curitÃ© renforcÃ©e** : accÃ¨s en lecture seulement sur la base, audits compatibles, aucun risque de fuite.

---

Dis-moi si tu veux maintenant un exemple de `.cursor/mcp.json` prÃªt Ã  utiliser et un prompt type pour un cas dâ€™usage (ex. inscripÂ­tion utilisateur avec Tiptap, audit SEO, etc.). Je peux te le prÃ©parer directement ğŸ’¡
::contentReference[oaicite:3]{index=3}
